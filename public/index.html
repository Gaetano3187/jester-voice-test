<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jester – Demo Vocale Completa</title>
  <style>
    :root {
      --green: #4caf50;
      --red: #e53935;
      --light: #f4f4f4;
      --white: #fff;
      --gray: #ddd;
      --shadow: rgba(0, 0, 0, 0.1);
      --blue: #1976d2;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Segoe UI", sans-serif;
      background: var(--light);
      color: #333;
      display: flex;
    }
    /* ───────────────────────── LAYOUT */
    #sidebar {
      width: 250px;
      background: var(--blue);
      color: #fff;
      min-height: 100vh;
      position: fixed;
      left: 0;
      top: 0;
      padding: 1rem 0;
      transition: transform 0.3s ease;
    }
    #sidebar h1 {
      font-size: 1.2rem;
      margin: 0 1rem 1rem;
    }
    #sidebar ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    #sidebar li {
      margin: 0.2rem 0;
    }
    #sidebar a {
      display: block;
      color: #fff;
      text-decoration: none;
      padding: 0.6rem 1.2rem;
    }
    #sidebar a:hover { background: rgba(255,255,255,0.15); }

    main {
      margin-left: 250px; /* sidebar width */
      padding: 1rem;
      flex: 1;
    }
    section {
      background: var(--white);
      border-radius: 10px;
      box-shadow: 0 0 10px var(--shadow);
      padding: 1rem 1.2rem;
      margin-bottom: 1.2rem;
    }
    section h2 { margin-top: 0; }

    /* Simple card lists */
    ul.list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    ul.list li {
      padding: 0.4rem 0.2rem;
      border-bottom: 1px solid var(--gray);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    ul.list li:last-child { border-bottom: none; }
    button.remove {
      background: none;
      border: none;
      color: var(--red);
      font-size: 1rem;
      cursor: pointer;
    }

    /* Progress bar */
    .progress {
      height: 12px;
      background: var(--gray);
      border-radius: 6px;
      overflow: hidden;
    }
    .progress > div {
      height: 100%;
      width: 0%;
      background: var(--red);
      transition: width 0.3s ease;
    }

    /* Mobile hamburger */
    #hamburger {
      display: none;
      position: fixed;
      top: 10px;
      left: 10px;
      background: var(--blue);
      color: #fff;
      border: none;
      font-size: 1.4rem;
      padding: 0.3rem 0.6rem;
      border-radius: 4px;
      z-index: 1001;
    }
    @media (max-width: 768px) {
      #sidebar { transform: translateX(-100%); }
      #sidebar.open { transform: translateX(0); }
      main { margin-left: 0; }
      #hamburger { display: block; }
    }
  </style>
</head>
<body>
  <button id="hamburger">☰</button>
  <nav id="sidebar" class="open">
    <h1>🎤 Jester</h1>
    <ul>
      <li><a href="#home">🏠 Home</a></li>
      <li><a href="#liste">🛒 Liste</a></li>
      <li><a href="#acquisti">✅ Acquisti</a></li>
      <li><a href="#preferiti">🌟 Preferiti</a></li>
      <li><a href="#stat">📊 Statistiche</a></li>
      <li><a href="#settings">⚙️ Impostazioni</a></li>
    </ul>
  </nav>

  <main>
    <!-- HOME -->
    <section id="home">
      <h2>🏠 Home</h2>
      <p>Benvenuto in <strong>Jester</strong>, il tuo assistente vocale per la gestione della spesa, delle scorte e dei gusti personali.</p>
      <p>Clicca sull’icona 🎙️ o usa il menu per iniziare.</p>
    </section>

    <!-- LISTE -->
    <section id="liste">
      <h2>🛒 Liste</h2>
      <h3>Lista Supermercato</h3>
      <ul id="lista-super" class="list"><li>(vuota)</li></ul>
      <h3>Lista Online</h3>
      <ul id="lista-online" class="list"><li>(vuota)</li></ul>
    </section>

    <!-- ACQUISTI -->
    <section id="acquisti">
      <h2>✅ Acquisti</h2>
      <ul id="lista-acquisti" class="list"><li>(nessun acquisto registrato)</li></ul>
    </section>

    <!-- PREFERITI -->
    <section id="preferiti">
      <h2>🌟 Preferiti</h2>
      <form id="form-pref">
        <input id="pref-input" type="text" placeholder="Aggiungi prodotto preferito…" required />
        <button type="submit">➕</button>
      </form>
      <ul id="lista-pref" class="list"><li>(nessun preferito)</li></ul>
    </section>

    <!-- STATISTICHE -->
    <section id="stat">
      <h2>📊 Statistiche</h2>
      <p>Prodotti in lista: <span id="stat-tot">0</span></p>
      <p>Prodotti acquistati: <span id="stat-buy">0</span></p>
      <div class="progress"><div id="stat-bar"></div></div>
    </section>

    <!-- IMPOSTAZIONI -->
    <section id="settings">
      <h2>⚙️ Impostazioni</h2>
      <button id="reset-btn">♻️ Ripristina Dati</button>
    </section>
  </main>

  <script>
    // Simple mobile nav toggle
    const hamburger = document.getElementById('hamburger');
    const sidebar   = document.getElementById('sidebar');
    hamburger.addEventListener('click', () => sidebar.classList.toggle('open'));

    // LocalStorage keys
    const LS_SUPER = 'jester_lista_super';
    const LS_ONLINE = 'jester_lista_online';
    const LS_PREF = 'jester_pref';
    const LS_BUY = 'jester_buy';

    // Elements
    const ulSuper = document.getElementById('lista-super');
    const ulOnline = document.getElementById('lista-online');
    const ulPref = document.getElementById('lista-pref');
    const ulBuy = document.getElementById('lista-acquisti');
    const statTot = document.getElementById('stat-tot');
    const statBuy = document.getElementById('stat-buy');
    const statBar = document.getElementById('stat-bar');

    // Load data or defaults
    const superData  = JSON.parse(localStorage.getItem(LS_SUPER) || '[]');
    const onlineData = JSON.parse(localStorage.getItem(LS_ONLINE) || '[]');
    const prefData   = JSON.parse(localStorage.getItem(LS_PREF) || '[]');
    const buyData    = JSON.parse(localStorage.getItem(LS_BUY) || '[]');

    // Render helpers
    function renderList(arr, ul) {
      ul.innerHTML = '';
      if (!arr.length) { ul.innerHTML = '<li>(vuota)</li>'; return; }
      arr.forEach((item, idx) => {
        const li = document.createElement('li');
        li.textContent = item;
        const btn = document.createElement('button');
        btn.textContent = '❌';
        btn.className = 'remove';
        btn.onclick = () => {
          arr.splice(idx,1);
          saveAll();
          renderAll();
        };
        li.appendChild(btn);
        ul.appendChild(li);
      });
    }

    function renderAll() {
      renderList(superData, ulSuper);
      renderList(onlineData, ulOnline);
      renderList(prefData, ulPref);
      renderList(buyData, ulBuy);
      const tot = superData.length + onlineData.length;
      const buy = buyData.length;
      statTot.textContent = tot;
      statBuy.textContent = buy;
      const perc = tot ? (buy / tot) * 100 : 0;
      statBar.style.width = perc + '%';
      statBar.style.background = perc < 33 ? '#e53935' : perc < 66 ? '#ffc107' : '#4caf50';
    }

    function saveAll() {
      localStorage.setItem(LS_SUPER, JSON.stringify(superData));
      localStorage.setItem(LS_ONLINE, JSON.stringify(onlineData));
      localStorage.setItem(LS_PREF, JSON.stringify(prefData));
      localStorage.setItem(LS_BUY, JSON.stringify(buyData));
    }

    // Pref form
    document.getElementById('form-pref').addEventListener('submit', e => {
      e.preventDefault();
      const val = document.getElementById('pref-input').value.trim();
      if (val) {
        prefData.push(val);
        saveAll();
        renderAll();
        document.getElementById('pref-input').value = '';
      }
    });

    // Reset button
    document.getElementById('reset-btn').addEventListener('click', () => {
      if (confirm('Sei sicuro di voler ripristinare i dati?')) {
        localStorage.removeItem(LS_SUPER);
        localStorage.removeItem(LS_ONLINE);
        localStorage.removeItem(LS_PREF);
        localStorage.removeItem(LS_BUY);
        location.reload();
      }
    });

    // Initial render
    renderAll();
  </script>
</body>
</html>
